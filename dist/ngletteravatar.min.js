"use strict";function getRandomColors(){for(var t="0123456789ABCDEF".split(""),a="#",e=0;e<6;e++)a+=t[Math.floor(16*Math.random())];return a}function getFirstAndLastName(t){var a=t.split(" ");if(a&&a.length>=2){var e=a[0],r=a[1];return e&&r?e.substr(0,1)+r.substr(0,1):t.substr(0,2)}}function getImgTag(t,a,e){return angular.element("<svg></svg>").attr({xmlns:"http://www.w3.org/2000/svg","pointer-events":"none",width:t,height:a}).css({"background-color":e,width:t+"px",height:a+"px"})}function getCharacterObject(t,a,e,r,o){return angular.element('<text text-anchor="middle"></text>').attr({y:"50%",x:"50%",dy:"0.35em","pointer-events":"auto",fill:a,"font-family":e}).html(t).css({"font-weight":r,"font-size":o+"px"})}var nla=angular.module("ngLetterAvatar",[]);nla.constant("defaultSettings",{alphabetcolors:["#5A8770","#B2B7BB","#6FA9AB","#F5AF29","#0088B9","#F18636","#D93A37","#A6B12E","#5C9BBC","#F5888D","#9A89B5","#407887","#9A89B5","#5A8770","#D33F33","#A2B01F","#F0B126","#0087BF","#F18636","#0087BF","#B2B7BB","#72ACAE","#9C8AB4","#5A8770","#EEB424","#407887"],textColor:"#ffffff",classes:"",defaultBorder:"border:5px solid white",triangleup:"width: 0;height: 0;border-left: 50px solid transparent;border-right: 50px solid transparent;border-bottom: 100px solid;",fontsize:30,height:50,width:50,fontWeight:400,charCount:1,fontFamily:"HelveticaNeue-Light,Helvetica Neue Light,Helvetica Neue,Helvetica, Arial,Lucida Grande, sans-serif",base:"data:image/svg+xml;base64,",radius:"border-radius:50%;",custombgcolor:"",dynamic:"false",rotatedeg:"0"}),nla.directive("ngLetterAvatar",["defaultSettings",function(t){return{restrict:"AE",replace:!0,scope:{alphabetcolors:"=alphabetcolors",data:"@"},link:function(a,e,r){function o(){var r="";if(2==s.charCount){var o=getFirstAndLastName(a.data.toUpperCase());r=o?o:a.data.substr(0,s.charCount).toUpperCase()}else r=a.data.substr(0,s.charCount).toUpperCase();var i=getCharacterObject(r,s.textColor,s.fontFamily,s.fontWeight,s.fontsize),n="",d="";r.charCodeAt(0)<65?d=getRandomColors():(n=Math.floor((r.charCodeAt(0)-65)%s.alphabetcolors.length),d=s.alphabetcolors[n]),s.avatarCustomBGColor&&(d=s.avatarCustomBGColor);var l=getImgTag(s.width,s.height,d);l.append(i);var h,c=angular.element("<div>").append(l.clone()).html(),g=window.btoa(unescape(encodeURIComponent(c))),f=t.base,u="";if(s.avatarBorderStyle?u=s.avatarBorderStyle:s.avatardefaultBorder&&(u=s.defaultBorder),"0"!=s.rotatedeg&&(u="-ms-transform: rotate("+s.rotatedeg+"deg); -webkit-transform: rotate("+s.rotatedeg+"deg); transform: rotate("+s.rotatedeg+"deg)"),s.shape){if("round"===s.shape){var m=t.radius+u;if(a.data.indexOf("http")>-1||a.data.indexOf("data:image")>-1){var p="width:"+s.width+"px;height:"+s.height+"px;";h="<img src="+a.data+" style='"+p+m+"'  />"}else h="<img src="+f+g+" style='"+m+"' title='"+a.data+"' />"}}else if(a.data.indexOf("http")>-1||a.data.indexOf("data:image")>-1){var p="width:"+s.width+"px;height:"+s.height+"px;";h="<img src="+a.data+" style='"+p+u+"'  />"}else h="<img src="+f+g+" style='"+u+"' title='"+a.data+"' />";var v=angular.element(h);"true"===s.dynamic?(e.empty(),v.css({width:"100%",height:"100%"}),e.append(v),e.addClass(s.classes)):(e.replaceWith(v),v.addClass(s.classes))}var s={charCount:r.charcount||t.charCount,data:r.data,textColor:t.textColor,classes:r.classes||t.classes,height:r.height||t.height,width:r.width||t.width,fontsize:r.fontsize||t.fontsize,fontWeight:r.fontweight||t.fontWeight,fontFamily:r.fontfamily||t.fontFamily,avatarBorderStyle:r.avatarcustomborder,avatardefaultBorder:r.avatarborder,defaultBorder:t.defaultBorder,shape:r.shape,alphabetcolors:a.alphabetcolors||t.alphabetcolors,avatarCustomBGColor:r.avatarcustombgcolor||t.custombgcolor,dynamic:r.dynamic||t.dynamic,rotatedeg:r.rotatedeg||t.rotatedeg};"true"===s.dynamic?a.$watch("data",function(){o()}):o()}}}]);